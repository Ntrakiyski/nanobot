import{G as ce,y as G,ag as Se,D as F,z as E,ah as Te,A as le,n as w,X as qe,B as Ke,H as Ge,C as pe,F as P,N as M,ai as Xe,aj as Ze,I as R,K as Qe,ak as X,al as Z,J as D,am as ge,a9 as xe,an as _e,ao as Ae,ap as we,L as de,M as Ce,aq as er,ar as ee,q as rr,as as H,at as tr,au as ar,av as sr,aw as ir,ax as nr,V as Ne,ay as or,E as lr,az as fr,aA as ur,aB as cr,aC as ye,g as he,aD as dr,aE as hr,aF as vr,aG as Me,aH as pr,aI as gr,aJ as _r,aK as yr,aL as mr,aM as br,aN as Ir,aO as Er,aP as Sr,aQ as Tr,aR as Ar,U as wr,aS as Cr,aT as Nr,aU as Mr,ac as Or,i as Lr,h as Pr,aV as kr,p as Oe,aW as Ur,aX as Le,b as fe,c as Pe,d as Dr,s as Rr,aY as ke,r as Hr,ad as Ue,a as De,ae as jr,aZ as $r,a_ as Vr,a$ as Wr,T as k,ab as U,R as re}from"./C1840Ik7.js";import"./DsnmJJEf.js";import{p as $,r as Re,s as Fr}from"./M7r-35Aa.js";function Jr(e,r){return r}function Yr(e,r,t){for(var a=e.items,s=[],i=r.length,n=0;n<i;n++)sr(r[n].e,s,!0);var o=i>0&&s.length===0&&t!==null;if(o){var v=t.parentNode;ir(v),v.append(t),a.clear(),N(e,r[0].prev,r[i-1].next)}nr(s,()=>{for(var l=0;l<i;l++){var y=r[l];o||(a.delete(y.k),N(e,y.prev,y.next)),H(y.e,!o)}})}function zr(e,r,t,a,s,i=null){var n=e,o={flags:r,items:new Map,first:null},v=(r&Se)!==0;if(v){var l=e;n=E?F(Te(l)):l.appendChild(ce())}E&&le();var y=null,p=!1,d=new Map,S=qe(()=>{var _=t();return we(_)?_:_==null?[]:Ae(_)}),f,h;function m(){Br(h,f,o,d,n,s,r,a,t),i!==null&&(f.length===0?y?de(y):y=R(()=>i(n)):y!==null&&Ce(y,()=>{y=null}))}G(()=>{h??=Ne,f=w(S);var _=f.length;if(p&&_===0)return;p=_===0;let T=!1;if(E){var g=Ke(n)===Ge;g!==(_===0)&&(n=pe(),F(n),P(!1),T=!0)}if(E){for(var b=null,I,u=0;u<_;u++){if(M.nodeType===Xe&&M.data===Ze){n=M,T=!0,P(!1);break}var c=f[u],A=a(c,u);I=ue(M,o,b,null,c,A,u,s,r,t),o.items.set(A,I),b=I}_>0&&F(pe())}if(E)_===0&&i&&(y=R(()=>i(n)));else if(Qe()){var O=new Set,Y=D;for(u=0;u<_;u+=1){c=f[u],A=a(c,u);var L=o.items.get(A)??d.get(A);L?(r&(X|Z))!==0&&He(L,c,u,r):(I=ue(null,o,null,null,c,A,u,s,r,t,!0),d.set(A,I)),O.add(A)}for(const[C,z]of o.items)O.has(C)||Y.skipped_effects.add(z.e);Y.add_callback(m)}else m();T&&P(!0),w(S)}),E&&(n=M)}function Br(e,r,t,a,s,i,n,o,v){var l=(n&tr)!==0,y=(n&(X|Z))!==0,p=r.length,d=t.items,S=t.first,f=S,h,m=null,_,T=[],g=[],b,I,u,c;if(l)for(c=0;c<p;c+=1)b=r[c],I=o(b,c),u=d.get(I),u!==void 0&&(u.a?.measure(),(_??=new Set).add(u));for(c=0;c<p;c+=1){if(b=r[c],I=o(b,c),u=d.get(I),u===void 0){var A=a.get(I);if(A!==void 0){a.delete(I),d.set(I,A);var O=m?m.next:f;N(t,m,A),N(t,A,O),te(A,O,s),m=A}else{var Y=f?f.e.nodes_start:s;m=ue(Y,t,m,m===null?t.first:m.next,b,I,c,i,n,v)}d.set(I,m),T=[],g=[],f=m.next;continue}if(y&&He(u,b,c,n),(u.e.f&ee)!==0&&(de(u.e),l&&(u.a?.unfix(),(_??=new Set).delete(u))),u!==f){if(h!==void 0&&h.has(u)){if(T.length<g.length){var L=g[0],C;m=L.prev;var z=T[0],Q=T[T.length-1];for(C=0;C<T.length;C+=1)te(T[C],L,s);for(C=0;C<g.length;C+=1)h.delete(g[C]);N(t,z.prev,Q.next),N(t,m,z),N(t,Q,L),f=L,m=Q,c-=1,T=[],g=[]}else h.delete(u),te(u,f,s),N(t,u.prev,u.next),N(t,u,m===null?t.first:m.next),N(t,m,u),m=u;continue}for(T=[],g=[];f!==null&&f.k!==I;)(f.e.f&ee)===0&&(h??=new Set).add(f),g.push(f),f=f.next;if(f===null)continue;u=f}T.push(u),m=u,f=u.next}if(f!==null||h!==void 0){for(var j=h===void 0?[]:Ae(h);f!==null;)(f.e.f&ee)===0&&j.push(f),f=f.next;var x=j.length;if(x>0){var ze=(n&Se)!==0&&p===0?s:null;if(l){for(c=0;c<x;c+=1)j[c].a?.measure();for(c=0;c<x;c+=1)j[c].a?.fix()}Yr(t,j,ze)}}l&&rr(()=>{if(_!==void 0)for(u of _)u.a?.apply()}),e.first=t.first&&t.first.e,e.last=m&&m.e;for(var Be of a.values())H(Be.e);a.clear()}function He(e,r,t,a){(a&X)!==0&&ge(e.v,r),(a&Z)!==0?ge(e.i,t):e.i=t}function ue(e,r,t,a,s,i,n,o,v,l,y){var p=(v&X)!==0,d=(v&er)===0,S=p?d?xe(s,!1,!1):_e(s):s,f=(v&Z)===0?n:_e(n),h={i:f,v:S,k:i,a:null,e:null,prev:t,next:a};try{if(e===null){var m=document.createDocumentFragment();m.append(e=ce())}return h.e=R(()=>o(e,S,f,l),E),h.e.prev=t&&t.e,h.e.next=a&&a.e,t===null?y||(r.first=h):(t.next=h,t.e.next=h.e),a!==null&&(a.prev=h,a.e.prev=h.e),h}finally{}}function te(e,r,t){for(var a=e.next?e.next.e.nodes_start:t,s=r?r.e.nodes_start:t,i=e.e.nodes_start;i!==null&&i!==a;){var n=ar(i);s.before(i),i=n}}function N(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function qr(e,r,t,a,s,i){let n=E;E&&le();var o,v,l=null;E&&M.nodeType===or&&(l=M,le());var y=E?M:e,p;G(()=>{const d=r()||null;var S=fr;d!==o&&(p&&(d===null?Ce(p,()=>{p=null,v=null}):d===v?de(p):(H(p),ye(!1))),d&&d!==v&&(p=R(()=>{if(l=E?l:document.createElementNS(S,d),ur(l,l),a){E&&cr(d)&&l.append(document.createComment(""));var f=E?Te(l):l.appendChild(ce());E&&(f===null?P(!1):F(f)),a(l,f)}Ne.nodes_end=l,y.before(l)})),o=d,o&&(v=o),ye(!0))},lr),n&&(P(!0),F(y))}function Kr(e,r){var t=void 0,a;G(()=>{t!==(t=r())&&(a&&(H(a),a=null),t&&(a=R(()=>{he(()=>t(e))})))})}function je(e){var r,t,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(r=0;r<s;r++)e[r]&&(t=je(e[r]))&&(a&&(a+=" "),a+=t)}else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}function Gr(){for(var e,r,t=0,a="",s=arguments.length;t<s;t++)(e=arguments[t])&&(r=je(e))&&(a&&(a+=" "),a+=r);return a}function Xr(e){return typeof e=="object"?Gr(e):e??""}const me=[...` 	
\r\fÂ \v\uFEFF`];function Zr(e,r,t){var a=e==null?"":""+e;if(t){for(var s in t)if(t[s])a=a?a+" "+s:s;else if(a.length)for(var i=s.length,n=0;(n=a.indexOf(s,n))>=0;){var o=n+i;(n===0||me.includes(a[n-1]))&&(o===a.length||me.includes(a[o]))?a=(n===0?"":a.substring(0,n))+a.substring(o+1):n=o}}return a===""?null:a}function be(e,r=!1){var t=r?" !important;":";",a="";for(var s in e){var i=e[s];i!=null&&i!==""&&(a+=" "+s+": "+i+t)}return a}function ae(e){return e[0]!=="-"||e[1]!=="-"?e.toLowerCase():e}function Qr(e,r){if(r){var t="",a,s;if(Array.isArray(r)?(a=r[0],s=r[1]):a=r,e){e=String(e).replaceAll(/\s*\/\*.*?\*\/\s*/g,"").trim();var i=!1,n=0,o=!1,v=[];a&&v.push(...Object.keys(a).map(ae)),s&&v.push(...Object.keys(s).map(ae));var l=0,y=-1;const h=e.length;for(var p=0;p<h;p++){var d=e[p];if(o?d==="/"&&e[p-1]==="*"&&(o=!1):i?i===d&&(i=!1):d==="/"&&e[p+1]==="*"?o=!0:d==='"'||d==="'"?i=d:d==="("?n++:d===")"&&n--,!o&&i===!1&&n===0){if(d===":"&&y===-1)y=p;else if(d===";"||p===h-1){if(y!==-1){var S=ae(e.substring(l,y).trim());if(!v.includes(S)){d!==";"&&p++;var f=e.substring(l,p).trim();t+=" "+f+";"}}l=p+1,y=-1}}}}return a&&(t+=be(a)),s&&(t+=be(s,!0)),t=t.trim(),t===""?null:t}return e==null?null:String(e)}function xr(e,r,t,a,s,i){var n=e.__className;if(E||n!==t||n===void 0){var o=Zr(t,a,i);(!E||o!==e.getAttribute("class"))&&(o==null?e.removeAttribute("class"):r?e.className=o:e.setAttribute("class",o)),e.__className=t}else if(i&&s!==i)for(var v in i){var l=!!i[v];(s==null||l!==!!s[v])&&e.classList.toggle(v,l)}return i}function se(e,r={},t,a){for(var s in t){var i=t[s];r[s]!==i&&(t[s]==null?e.style.removeProperty(s):e.style.setProperty(s,i,a))}}function et(e,r,t,a){var s=e.__style;if(E||s!==r){var i=Qr(r,a);(!E||i!==e.getAttribute("style"))&&(i==null?e.removeAttribute("style"):e.style.cssText=i),e.__style=r}else a&&(Array.isArray(a)?(se(e,t?.[0],a[0]),se(e,t?.[1],a[1],"important")):se(e,t,a));return a}function q(e,r,t=!1){if(e.multiple){if(r==null)return;if(!we(r))return dr();for(var a of e.options)a.selected=r.includes(J(a));return}for(a of e.options){var s=J(a);if(hr(s,r)){a.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function $e(e){var r=new MutationObserver(()=>{q(e,e.__value)});r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),vr(()=>{r.disconnect()})}function ct(e,r,t=r){var a=!0;Me(e,"change",s=>{var i=s?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(i),J);else{var o=e.querySelector(i)??e.querySelector("option:not([disabled])");n=o&&J(o)}t(n)}),he(()=>{var s=r();if(q(e,s,a),a&&s===void 0){var i=e.querySelector(":checked");i!==null&&(s=J(i),t(s))}e.__value=s,a=!1}),$e(e)}function J(e){return"__value"in e?e.__value:e.value}const V=Symbol("class"),W=Symbol("style"),Ve=Symbol("is custom element"),We=Symbol("is html");function dt(e){if(E){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var a=e.value;K(e,"value",null),e.value=a}if(e.hasAttribute("checked")){var s=e.checked;K(e,"checked",null),e.checked=s}}};e.__on_r=t,Nr(t),Mr()}}function ht(e,r){var t=ve(e);t.checked!==(t.checked=r??void 0)&&(e.checked=r)}function rt(e,r){r?e.hasAttribute("selected")||e.setAttribute("selected",""):e.removeAttribute("selected")}function K(e,r,t,a){var s=ve(e);E&&(s[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||s[r]!==(s[r]=t)&&(r==="loading"&&(e[gr]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Fe(e).includes(r)?e[r]=t:e.setAttribute(r,t))}function tt(e,r,t,a,s=!1){var i=ve(e),n=i[Ve],o=!i[We];let v=E&&n;v&&P(!1);var l=r||{},y=e.tagName==="OPTION";for(var p in r)p in t||(t[p]=null);t.class?t.class=Xr(t.class):t[V]&&(t.class=null),t[W]&&(t.style??=null);var d=Fe(e);for(const g in t){let b=t[g];if(y&&g==="value"&&b==null){e.value=e.__value="",l[g]=b;continue}if(g==="class"){var S=e.namespaceURI==="http://www.w3.org/1999/xhtml";xr(e,S,b,a,r?.[V],t[V]),l[g]=b,l[V]=t[V];continue}if(g==="style"){et(e,b,r?.[W],t[W]),l[g]=b,l[W]=t[W];continue}var f=l[g];if(!(b===f&&!(b===void 0&&e.hasAttribute(g)))){l[g]=b;var h=g[0]+g[1];if(h!=="$$")if(h==="on"){const I={},u="$$"+g;let c=g.slice(2);var m=Cr(c);if(Ir(c)&&(c=c.slice(0,-7),I.capture=!0),!m&&f){if(b!=null)continue;e.removeEventListener(c,l[u],I),l[u]=null}if(b!=null)if(m)e[`__${c}`]=b,Sr([c]);else{let A=function(O){l[g].call(this,O)};l[u]=Er(c,e,A,I)}else m&&(e[`__${c}`]=void 0)}else if(g==="style")K(e,g,b);else if(g==="autofocus")Tr(e,!!b);else if(!n&&(g==="__value"||g==="value"&&b!=null))e.value=e.__value=b;else if(g==="selected"&&y)rt(e,b);else{var _=g;o||(_=Ar(_));var T=_==="defaultValue"||_==="defaultChecked";if(b==null&&!n&&!T)if(i[g]=null,_==="value"||_==="checked"){let I=e;const u=r===void 0;if(_==="value"){let c=I.defaultValue;I.removeAttribute(_),I.defaultValue=c,I.value=I.__value=u?c:null}else{let c=I.defaultChecked;I.removeAttribute(_),I.defaultChecked=c,I.checked=u?c:!1}}else e.removeAttribute(g);else T||d.includes(_)&&(n||typeof b!="string")?(e[_]=b,_ in i&&(i[_]=wr)):typeof b!="function"&&K(e,_,b)}}}return v&&P(!0),l}function Ie(e,r,t=[],a=[],s,i=!1){pr(t,a,n=>{var o=void 0,v={},l=e.nodeName==="SELECT",y=!1;if(G(()=>{var d=r(...n.map(w)),S=tt(e,o,d,s,i);y&&l&&"value"in d&&q(e,d.value);for(let h of Object.getOwnPropertySymbols(v))d[h]||H(v[h]);for(let h of Object.getOwnPropertySymbols(d)){var f=d[h];h.description===mr&&(!o||f!==o[h])&&(v[h]&&H(v[h]),v[h]=R(()=>Kr(e,()=>f))),S[h]=f}o=S}),l){var p=e;he(()=>{q(p,o.value,!0),$e(p)})}y=!0})}function ve(e){return e.__attributes??={[Ve]:e.nodeName.includes("-"),[We]:e.namespaceURI===_r}}var Ee=new Map;function Fe(e){var r=e.getAttribute("is")||e.nodeName,t=Ee.get(r);if(t)return t;Ee.set(r,t=[]);for(var a,s=e,i=Element.prototype;i!==s;){a=br(s);for(var n in a)a[n].set&&t.push(n);s=yr(s)}return t}function vt(e,r,t=r){var a=new WeakSet;Me(e,"input",async s=>{var i=s?e.defaultValue:e.value;if(i=ie(e)?ne(i):i,t(i),D!==null&&a.add(D),await Or(),i!==(i=r())){var n=e.selectionStart,o=e.selectionEnd;e.value=i??"",o!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length))}}),(E&&e.defaultValue!==e.value||Lr(r)==null&&e.value)&&(t(ie(e)?ne(e.value):e.value),D!==null&&a.add(D)),Pr(()=>{var s=r();if(e===document.activeElement){var i=kr??D;if(a.has(i))return}ie(e)&&s===ne(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function ie(e){var r=e.type;return r==="number"||r==="range"}function ne(e){return e===""?null:+e}/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 * 
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 * 
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 * 
 * ---
 * 
 * The MIT License (MIT) (for portions derived from Feather)
 * 
 * Copyright (c) 2013-2023 Cole Bemis
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const at={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};var st=Ur("<svg><!><!></svg>");function it(e,r){Oe(r,!0);const t=$(r,"color",3,"currentColor"),a=$(r,"size",3,24),s=$(r,"strokeWidth",3,2),i=$(r,"absoluteStrokeWidth",3,!1),n=$(r,"iconNode",19,()=>[]),o=Re(r,["$$slots","$$events","$$legacy","name","color","size","strokeWidth","absoluteStrokeWidth","iconNode","children"]);var v=st();Ie(v,p=>({...at,...o,width:a(),height:a(),stroke:t(),"stroke-width":p,class:["lucide-icon lucide",r.name&&`lucide-${r.name}`,r.class]}),[()=>i()?Number(s())*24/Number(a()):s()]);var l=Dr(v);zr(l,17,n,Jr,(p,d)=>{var S=jr(()=>$r(w(d),2));let f=()=>w(S)[0],h=()=>w(S)[1];var m=Ue(),_=De(m);qr(_,f,!0,(T,g)=>{Ie(T,()=>({...h()}))}),fe(p,m)});var y=Rr(l);Le(y,()=>r.children??ke),Hr(v),fe(e,v),Pe()}function pt(e,r){Oe(r,!0);/**
 * @license @lucide/svelte v0.540.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */let t=Re(r,["$$slots","$$events","$$legacy"]);const a=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];it(e,Fr({name:"x"},()=>t,{get iconNode(){return a},children:(s,i)=>{var n=Ue(),o=De(n);Le(o,()=>r.children??ke),fe(s,n)},$$slots:{default:!0}})),Pe()}const Je=Symbol("notifications");function gt(e){Vr(Je,e)}function oe(){return Wr(Je)}class nt{baseUrl;fetcher;constructor(r="",t){this.baseUrl=r,this.fetcher=t?.fetcher||fetch}async reply(r,t,a){const i=await(await this.fetcher(`${this.baseUrl}/mcp/ui`,{method:"POST",headers:{"Content-Type":"application/json",...a?.sessionId&&{"Mcp-Session-Id":a.sessionId}},body:JSON.stringify({jsonrpc:"2.0",id:r,result:t})})).json();if(i.error?.message){try{oe().error("API Error",i.error.message)}catch{console.error("MCP Tool Error:",i.error.message)}throw new Error(i.error.message)}}async exchange(r,t,a){const i=await(await this.fetcher(`${this.baseUrl}/mcp/ui`,{method:"POST",headers:{"Content-Type":"application/json",...a?.sessionId&&{"Mcp-Session-Id":a.sessionId}},body:JSON.stringify({id:crypto.randomUUID(),jsonrpc:"2.0",method:r,params:t})})).json();if(i.error?.message){try{oe().error("API Error",i.error.message)}catch{console.error("MCP Tool Error:",i.error.message)}throw new Error(i.error.message)}return i.result}async callMCPTool(r,t){const s=await(await this.fetcher(`${this.baseUrl}/mcp/ui`,{method:"POST",headers:{"Content-Type":"application/json",...t?.sessionId&&{"Mcp-Session-Id":t.sessionId}},body:JSON.stringify({id:crypto.randomUUID(),jsonrpc:"2.0",method:"tools/call",params:{name:r,arguments:t?.payload||{},...t?.async&&{_meta:{"ai.nanobot.async":!0,progressToken:t?.progressToken}}}})})).json();if(s.error?.message){try{oe().error("API Error",s.error.message)}catch{console.error("MCP Tool Error:",s.error.message)}throw new Error(s.error.message)}return s.result?.content?.[0]?.structuredContent?s.result.content[0].structuredContent:{}}async deleteThread(r){await this.callMCPTool("delete_chat",{payload:{chatId:r}})}async renameThread(r,t){return await this.callMCPTool("update_chat",{payload:{chatId:r,title:t}})}async getThreads(){return(await this.callMCPTool("list_chats")).chats}async createThread(){return await this.callMCPTool("create_chat")}async sendMessage(r){return await this.callMCPTool("chat_ui",{payload:{prompt:r.message},sessionId:r.threadId,progressToken:r.id,async:!0}),{message:{id:r.id,role:"user",created:Ye(),items:[{id:r.id+"_0",type:"text",text:r.message}]}}}subscribe(r,t,a){const s=new EventSource(`${this.baseUrl}/api/events/${r}`);s.onmessage=i=>{const n=JSON.parse(i.data);t({type:"message",message:n})};for(const i of a?.events??[])s.addEventListener(i,n=>{t({id:n.lastEventId,type:i,data:JSON.parse(n.data)})});return s.onerror=i=>{t({type:"error",error:String(i)}),console.error("EventSource failed:",i),s.close()},s.onopen=()=>{console.log("EventSource connected for thread:",r)},()=>s.close()}}function B(e,r){let t=!1;return r.id&&(e=e.map(a=>a.id===r.id?(t=!0,r):a)),t||(e=[...e,r]),e}const ot=new nt;class _t{#e;get messages(){return w(this.#e)}set messages(r){k(this.#e,r,!0)}#r;get history(){return w(this.#r)}set history(r){k(this.#r,r,!0)}#t;get isLoading(){return w(this.#t)}set isLoading(r){k(this.#t,r,!0)}#a;get elicitations(){return w(this.#a)}set elicitations(r){k(this.#a,r,!0)}#s;get prompts(){return w(this.#s)}set prompts(r){k(this.#s,r,!0)}#i;get chatId(){return w(this.#i)}set chatId(r){k(this.#i,r,!0)}api;closer=()=>{};constructor(r){this.api=r?.api||ot,this.#e=U(re([])),this.#r=U(),this.#t=U(!1),this.#a=U(re([])),this.#s=U(re([])),this.#i=U(""),r?.chatId&&this.setChatId(r.chatId)}close=()=>{this.closer(),this.setChatId("")};setChatId=async r=>{if(r!==this.chatId&&(this.chatId=r,this.messages=[],this.prompts=[],this.elicitations=[],this.history=void 0,this.isLoading=!1,this.subscribe(r),r)){const t=await this.listPrompts();t.prompts&&(this.prompts=t.prompts)}};listPrompts=async()=>await this.api.exchange("prompts/list",{});subscribe(r){this.closer(),r&&(this.closer=this.api.subscribe(r,t=>{t.type=="message"&&t.message?.id?this.history?this.history=B(this.history,t.message):this.messages=B(this.messages,t.message):t.type=="history-start"?this.history=[]:t.type=="history-end"?(this.messages=this.history||[],this.history=void 0):t.type=="chat-in-progress"?this.isLoading=!0:t.type=="chat-done"?this.isLoading=!1:t.type=="elicitation/create"&&(this.elicitations=[...this.elicitations,{id:t.id,...t.data}]),console.log("Received event:",t)},{events:["history-start","history-end","chat-in-progress","chat-done","elicitation/create"]}))}replyToElicitation=async(r,t)=>{await this.api.reply(r.id,t),this.elicitations=this.elicitations.filter(a=>a.id!==r.id)};sendMessage=async r=>{if(!(!r.trim()||this.isLoading)){if(this.isLoading=!0,!this.chatId){const t=await this.api.createThread();await this.setChatId(t.id)}try{const t=await this.api.sendMessage({id:crypto.randomUUID(),threadId:this.chatId,message:r});this.messages=B(this.messages,t.message)}catch(t){this.messages=B(this.messages,{id:crypto.randomUUID(),role:"assistant",created:Ye(),items:[{id:crypto.randomUUID(),type:"text",text:`Sorry, I couldn't send your message. Please try again. Error: ${t}`}]})}finally{this.isLoading=!1}}}}function Ye(){return new Date().toISOString()}export{_t as C,it as I,pt as X,et as a,vt as b,Xr as c,gt as d,zr as e,ot as f,K as g,ct as h,Jr as i,ht as j,dt as r,xr as s};
